webpackJsonp([20],{310:function(t,i,n){function e(t){n(842)}var r=n(0)(n(440),n(932),e,"data-v-5f2b363e",null);t.exports=r.exports,r.options.__file="/src/modules/login/handLock/handLock/handLock.vue"},373:function(t,i,n){function e(t){n(848)}var r=n(0)(n(435),n(938),e,"data-v-6912e334",null);t.exports=r.exports,r.options.__file="/src/modules/login/component/handLock/handLock.vue"},435:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(135),r=n.n(e);i.default={name:"vCanvas",props:{normalColor:{type:String,default:"#A0AAAD"},pointBgColor:{type:String,default:"rgba(111, 122, 126, .7)"},pointActiveColor:{type:String,default:"#ffffff"},lineActiveColor:{type:String,default:"rgba(255, 255, 255, .3)"},errorColor:{type:String,default:"#FF3F3F"},errorLineColor:{type:String,default:"rgba(255, 63, 63, .3)"},errorTime:{type:String,default:"3000"},canWRatio:{type:Number,default:.7}},computed:{canW:function(){return(this.winW*this.canWRatio).toFixed(2)},canH:function(){return this.canW},wrapH:function(){return parseInt(this.canH/4)},wrapW:function(){return parseInt(this.canW/4)}},data:function(){return{winH:0,winW:0,padding:0,ringR:0,ringLineW:0,ringMargin:0,circleR:0,lineW:0,ringArr:[],activeArr:[],lastX:0,lastY:0,activeIndex:{},handLock:[],ctx:null,errorTimer:null}},methods:{touchstart:function(t){this.clear();var i=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,e=this.resolveLocation(i,n),r=e.x,s=e.y;this.lastX=r,this.lastY=s,this.isInRing(r,s),this.initAnimation()},touchmove:function(t){t.preventDefault();var i=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,e=this.resolveLocation(i,n),r=e.x,s=e.y;this.lastX=r,this.lastY=s,this.isInRing(r,s),this.initAnimation()},touchend:function(t){this.initAnimation();var i=this.getHandLock();this.$emit("getHandLock",i)},initAnimation:function(){this.clearCanvas(),this.drawActiveLine(),this.drawLastActiveLine(this.lastX,this.lastY),this.drawActiveRing()},initCanvas:function(){this.canvasBg=this.$refs.canvasBg,this.canvas=this.$refs.vCanvas,this.ctxBg=this.canvasBg.getContext("2d"),this.ctx=this.canvas.getContext("2d");var t=this.canvas,i=this.canvasBg;t.width=this.canW,t.height=this.canH,i.width=this.canW,i.height=this.canH,this.drawOpacityBg(),this.drawAllRing(this.ctxBg)},getHandLock:function(){return this.handLock},clearCanvas:function(){this.ctx.clearRect(0,0,this.canW,this.canH)},clear:function(){this.clearTimer(),this.handLock=[],this.activeArr=[],this.activeIndex={},this.clearCanvas(),this.$emit("clear")},errorDraw:function(){var t=this;this.clearCanvas(),this.drawActiveRing(this.errorColor),this.drawActiveLine(this.errorLineColor),this.errorTimer=setTimeout(function(){t.clear(),clearTimeout(t.errorTimer),t.errorTimer=null},this.errorTime)},clearTimer:function(){this.errorTimer&&(clearTimeout(this.errorTimer),this.errorTimer=null)},drawOpacityBg:function(){this.ctxBg.fillStyle="rgba(255, 255, 255, 0)",this.ctxBg.fillRect(0,0,this.canW,this.canH)},drawRing:function(t,i,n){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.normalColor,r=this.ringR,s=this.ringLineW;e=e;var a=this.pointBgColor;this.drawCircle(t,i,n,r,"fill",a),this.drawCircle(t,i,n,r,"stroke",e,s)},drawCircle:function(t,i,n,e,r,s){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;t.lineWidth=a,t.beginPath(),t.arc(i,n,e,0,2*Math.PI),t.closePath(),t[r+"Style"]=s,t[r]()},drawAllRing:function(t){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.normalColor,n=this.ringMargin,e=this.padding+this.ringR,r=this.padding+this.ringR,s=void 0,a=void 0,o=0;o<3;o++){a=r+o*(n+2*this.ringR);for(var c=[],h=0;h<3;h++)s=e+h*(n+2*this.ringR),this.drawRing(t,s,a,i),c.push(this.savePos(s,a));this.ringArr.push(c)}},savePos:function(t,i){return{ringCenter:{x:t,y:i}}},drawActiveRing:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pointActiveColor,i=!0,n=!1,e=void 0;try{for(var s,a=r()(this.activeArr);!(i=(s=a.next()).done);i=!0){var o=s.value,c=o.ringCenter.x,h=o.ringCenter.y,l=this.circleR;this.drawCircle(this.ctx,c,h,this.ringR,"stroke",t,this.ringLineW),this.drawCircle(this.ctx,c,h,l,"fill",t)}}catch(t){n=!0,e=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw e}}},drawLine:function(t,i,n,e,r){var s=this.ctx;s.lineWidth=20,s.beginPath(),s.moveTo(t,i),s.lineTo(n,e),s.closePath(),s.strokeStyle=r,s.stroke()},drawActiveLine:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineActiveColor;if(!(this.activeArr.length<2))for(var i=0;i<this.activeArr.length-1;i++){var n=this.activeArr[i].ringCenter.x,e=this.activeArr[i].ringCenter.y,r=this.activeArr[i+1].ringCenter.x,s=this.activeArr[i+1].ringCenter.y;this.drawLine(n,e,r,s,t)}},drawLastActiveLine:function(t,i){if(!(this.activeArr.length<1)){var n=this.activeArr[this.activeArr.length-1].ringCenter.x,e=this.activeArr[this.activeArr.length-1].ringCenter.y;this.drawLine(n,e,t,i)}},getWindowSize:function(){this.winW=4*window.innerWidth,this.winH=4*window.innerHeight},getSizePer100:function(t){if(t)return(t=Number(t))*this.winW/750},initSize:function(){this.padding=this.getSizePer100(18.5),this.ringR=this.getSizePer100(58),this.ringLineW=this.getSizePer100(4),this.ringMargin=this.getSizePer100(68),this.circleR=this.getSizePer100(30),this.lineW=this.getSizePer100(12)},getOffsetCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$refs.canWrap;this.canOffsetTop=function t(i){var n=i.offsetTop;return null!==i.offsetParent&&(n+=t(i.offsetParent)),n}(t),this.canOffsetLeft=function t(i){var n=i.offsetLeft;return null!==i.offsetParent&&(n+=t(i.offsetParent)),n}(t)},resolveLocation:function(t,i){return{x:(4*(t-this.canOffsetLeft)).toFixed(2),y:(4*(i-this.canOffsetTop)).toFixed(4)}},isInRing:function(t,i){for(var n=0;n<this.ringArr.length;n++)for(var e=0;e<this.ringArr[n].length;e++){var r=this.ringArr[n][e].ringCenter.x,s=this.ringArr[n][e].ringCenter.y,a=Math.sqrt(Math.pow(Math.abs(t-r),2)+Math.pow(Math.abs(i-s),2))<this.ringR;if(a){var o=3*n+e;if(this.activeIndex[o])return;return this.handLock.push(o),this.activeIndex[o]=!0,this.activeArr.push(this.savePos(r,s)),this.lastX=r,this.lastY=s,a}}}},mounted:function(){var t=this;this.getWindowSize(),this.initSize(),this.initCanvas(),this.$nextTick(function(){t.getOffsetCanvas()})}}},440:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=n(135),r=n.n(e),s=n(503);i.default={name:"vHandLock",components:{vHandLock:s.a},data:function(){return{pointList:[{isActive:!1},{isActive:!1},{isActive:!1},{isActive:!1},{isActive:!1},{isActive:!1},{isActive:!1},{isActive:!1},{isActive:!1}],handLock:[],toastTxt:"请至少连接四个点",handLockMinLen:4,showToast:!1,os:"",phoneModel:""}},methods:{getHandLock:function(t){this.handLock=t,this.setActivePoint(),this.isLegal()?this.jumpMainPage():this.errorDraw()},errorDraw:function(){this.$refs.handLock.errorDraw()},setActivePoint:function(){this.reSet();var t=!0,i=!1,n=void 0;try{for(var e,s=r()(this.handLock);!(t=(e=s.next()).done);t=!0){var a=e.value;this.pointList[a].isActive=!0}}catch(t){i=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}},reSet:function(){var t=!0,i=!1,n=void 0;try{for(var e,s=r()(this.pointList);!(t=(e=s.next()).done);t=!0){e.value.isActive=!1}}catch(t){i=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}},isLegal:function(){return!(this.handLock.length<this.handLockMinLen)||(this._showToast(this.toastTxt),!1)},_showToast:function(t){this.toastTxt=t,this.showToast=!0},jumpMainPage:function(){this.jumpBack({back:"/main/mainPage/index"})},jumpLoginPwdPage:function(){T.Native.popWindow({data:{backPage:-1,params:{}},options:{}})},jumpFingerPrintsPage:function(){T.Native.pushWindow({data:{path:"/login/loginFingerPrints/loginFingerPrints",backPage:-1,params:{}},options:{transparentTitle:!1,showTitleBar:!1}})},jumpPage:function(t){window.T.go(t)},jumpBack:function(){T.Native.popWindow({data:{backPage:-1,params:{}},options:{}})},getOs:function(){this.os=window.T.Device.os,this.phoneModel=window.T.Device.phoneModel},setBodyClassName:function(){"ios"!==this.os&&"android"!==this.os||(document.body.className+=" no-padding")}},created:function(){this.getOs(),this.setBodyClassName()}}},503:function(t,i,n){"use strict";var e=n(373),r=n.n(e);n.d(i,"a",function(){return r.a})},508:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=(n(2),n(310)),r=n.n(e);init(r.a)},842:function(t,i){},848:function(t,i){},932:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{staticClass:"lock-wrap",class:["ios"===t.os||"android"===t.os?"iphoneX"===t.phoneModel?"ios-padding-top iphoneX":"ios-padding-top":""]},[n("div",{staticClass:"back"},[n("v-btn")],1),t._v(" "),n("div",{staticClass:"dongya-logo-wrap"}),t._v(" "),n("ul",{staticClass:"point-list"},[n("li",{staticClass:"item"},[n("ul",{staticClass:"item-list"},t._l(t.pointList,function(i,e){return e<3?n("li",{key:e,staticClass:"point",class:{active:i.isActive}}):t._e()}))]),t._v(" "),n("li",{staticClass:"item"},[n("ul",{staticClass:"item-list"},t._l(t.pointList,function(i,e){return e<6&&e>2?n("li",{key:e,staticClass:"point",class:{active:i.isActive}}):t._e()}))]),t._v(" "),n("li",{staticClass:"item"},[n("ul",{staticClass:"item-list"},t._l(t.pointList,function(i,e){return e<9&&e>5?n("li",{key:e,staticClass:"point",class:{active:i.isActive}}):t._e()}))])]),t._v(" "),n("div",{staticClass:"lock-container"},[n("v-hand-lock",{ref:"handLock",on:{getHandLock:t.getHandLock,clear:t.reSet}})],1),t._v(" "),n("div",{staticClass:"btn-wrap"}),t._v(" "),n("v-toast",{attrs:{toastTxt:t.toastTxt},model:{value:t.showToast,callback:function(i){t.showToast=i},expression:"showToast"}})],1)},staticRenderFns:[]}},938:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{ref:"canWrap",staticClass:"can-wrap",style:{height:t.wrapH+"px",width:t.wrapW+"px"}},[n("canvas",{ref:"canvasBg",attrs:{id:"canBg"}}),t._v(" "),n("canvas",{ref:"vCanvas",attrs:{id:"canDraw"},on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}})])},staticRenderFns:[]}}},[508]);
//# sourceMappingURL=handLock.js.map